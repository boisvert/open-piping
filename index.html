<!doctype html>
<meta charset="utf-8" />

<head>

<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jsPlumb/1.4.1/jquery.jsPlumb-1.4.1-all-min.js"></script>
<script src="workflow editor.js"></script>
<script src="open workflow.js"></script>
    
    <title>Edit and interpret a workflow</title>
    
<style>
    
    #pipeContainer {
        position: relative;
        padding: 20px;
        width:80%; height: 400px;
        border: 1px solid gray;
    }

    .block {
        position: absolute;
        height:50px; width: 80px;
        border: 1px solid blue;
    }

    .blockType {
        position: absolute;
        height:50px; width: 80px;
        border: 1px solid red;
    }

    .block:hover {
        border: 2px solid blue;
    }
    .blockType:hover{
        border: 2px solid blue;
    }
    .selectedBlock{
        border: 2px solid blue;
    }

</style>
    
</head>

<body>

<h1>Open workflow: lowering the barriers to data science</h1>

<h2>Compile an S-expression into a function call and function set</h2>
<a href="about.html">about</a>

<p>
<div id="pipeContainer"></div>

<p>
Code
<input type="button" value="Example1" onClick="inject(0);" /> 
<input type="button" value="Example2" onClick="inject(1);" /> 
<input type="button" value="Example3" onClick="inject(2);" />
<input type="button" value="Example4" onClick="inject(3);" /> 
<input type="button" value="Example5" onClick="inject(4);" /> 
<input type="button" value="Example6" onClick="inject(5);" /> 
<br />
<textarea id="s-exp" cols="80" rows="10"></textarea>
<br />
<input type="button" value="compile" onClick="go()" /> <br />
Result<br />
<textarea id="result" cols="80" rows="10">
</textarea>
<input type="button" value="Show result" onClick="runres();" /> <br />


<script>

// show sample of code
function inject(num) {
   var samples = [
      '["plus", 1, 2]',
      '[\n  ["defun", "square", ["x"], ["times", "x", "x"]],\n  ["square", 2]\n]',
      '[\n  ["defun", "fac", ["n"], ["if", ["lt", "n", 2], 1, ["times", "n", ["fac", ["minus", "n", 1]] ]]],\n  ["fac", 10]\n]',
      '["pythagoras", 3, 4]',
      '[1, 2, 3]',
      '1'
   ];
   document.getElementById('s-exp').value=samples[num];
}

// compile event
function go() {
   var Exp = JSON.parse(document.getElementById('s-exp').value);
   document.getElementById('result').value=compile(Exp);
}

// run result
function runres() {
   var c = document.getElementById('result').value;
   alert(eval(c));
}

</script>
</body>
</html>
